# Hybrid training config: Phase 1 (supervised) + Phase 2 (self-training)
# Usage: python train_hybrid.py --experiment_config_file configs/train_hybrid_local.yaml --disable_wandb
DATA:
  CROP_RESOLUTION: [512, 1024]
  SCALE: 0.5
  DATASET: "cityscapes"
  IGNORE_UNKNOWN_THING_REGIONS: False
  ROOT: "/Users/qbit-glitch/Desktop/datasets/cityscapes/"
  ROOT_VAL: "/Users/qbit-glitch/Desktop/datasets/cityscapes/"
  ROOT_PSEUDO: "/Users/qbit-glitch/Desktop/datasets/cityscapes/cups_pseudo_labels_v2/"
MODEL:
  BACKBONE_TYPE: "resnet50"
  USE_DINO: True
  CHECKPOINT: null
  INFERENCE_CONFIDENCE_THRESHOLD: 0.5
  TTA_INFERENCE_CONFIDENCE_THRESHOLD: 0.7
  TTA_SCALES: [0.5, 0.75, 1.0]
TRAINING:
  STEPS: 3000
  BATCH_SIZE: 1
  PRECISION: "32-true"
  OPTIMIZER: "adamw"
  ADAMW:
    LEARNING_RATE: 0.0001
    WEIGHT_DECAY: 0.00001
  VAL_EVERY_N_STEPS: 500
  LOG_MEDIA_N_STEPS: 100
  DROP_LOSS: True
  DROP_LOSS_IOU_THRESHOLD: 0.4
SELF_TRAINING:
  ROUND_STEPS: 500
  ROUNDS: 2
  USE_DROP_LOSS: False
  SEMANTIC_SEGMENTATION_THRESHOLD: 0.5
  CONFIDENCE_STEP: 0.05
AUGMENTATION:
  COPY_PASTE: True
  MAX_NUM_PASTED_OBJECTS: 4
  NUM_STEPS_STARTUP: 300
  RESOLUTIONS:
    - [384, 768]
    - [448, 896]
    - [512, 1024]
SYSTEM:
  ACCELERATOR: "cpu"
  NUM_GPUS: 1
  NUM_WORKERS: 0
  RUN_NAME: "hybrid_local"
  LOG_PATH: "experiments"
VALIDATION:
  CACHE_DEVICE: "cpu"
MASK_REFINEMENT:
  ENABLE: True
  MORPHOLOGICAL: True
  GUIDED_FILTER: True
  GUIDED_FILTER_RADIUS: 8
  GUIDED_FILTER_EPS: 0.01
  BILATERAL_SOLVER: False
  MIN_AREA: 100
